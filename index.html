<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>HLS</title>
    <meta id="viewport" content="width=device-width,initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport" />
    <link rel="stylesheet" href="player/mediaelementplayer.css" />
    <style>
        *{
            margin:0;
            padding:0;
        }
        body{        
            overflow: hidden;
        }
        #video{
            position:absolute;
            top:50%;
            left:50%;
        }
        video::-webkit-media-controls-start-playback-button {
            display: none;
        }
    </style>
</head>
<body>
<video id="video" autoplay controls webkit-playsinline="true" type="application/x-mpegURL" src=""></video>

<script src="http://7.url.cn/edu/jslib/jquery/1.9.1/jquery.min.js"></script>
<!-- <script src="./player/mediaelement-and-player.js"></script> -->

<script>
$(function(){
    var url = 'http://inlive.jiuyan.info/recordings/z1.inlive.57e1f7321013855d35008279/in/2016/09/21/36E31980-8276-9CDA-8618-C80D36B2CA09-1XBBDpdV.m3u8';
    var url = 'http://inlive.jiuyan.info/recordings/z1.inlive.57e2463a75b62535c300506b/in/2016/09/21/57B65BA9-7607-BD79-F1A3-C24A7B3B7884-1bLjoXDy.m3u8';
    autoCenterVideo(url);
    function autoCenterVideo(src, w, h){
        var winW = $(window).width();
        var winH = $(window).height();
        var winScale = winW / winH;

        var videoW = w || 480;
        var videoH = h || 848;
        var videoScale = videoW / videoH;

        if(videoScale > winScale){
            videoW = winW;
            videoH = winW / videoScale;
        }else{
            videoH = winH;
            videoW = winH * videoScale;
        }
        var $video = $('#video');
        $video
            .attr({
                'width': videoW,
                'height': videoH,
                // 'width': winW,
                // 'height': winH,
                'src': src
            })
            .css({
                'margin-left': -videoW / 2,
                'margin-top': -videoH / 2
            })
            .on('ended', function(e){
                // 没有触发
                // alert('end')
            })
            .on('canplay', function(){
                //触发了没起作用
                $video[0].play();
                $video.trigger('click');
            })
            .on('error', function(e){
                // 页面加载时地址无效会触发，播放中不会触发
                alert('error')
            })
            .on('pause', function(){
                // 回放(no-loop)和直播结束后会触发
                alert('pause')
            })
    }
})

</script>
</body>
</html>